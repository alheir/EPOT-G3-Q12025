Version 4.1
SHEET 1 880 948
WIRE -384 32 -848 32
WIRE -352 32 -384 32
WIRE 96 64 -1008 64
WIRE -176 80 -784 80
WIRE -400 96 -512 96
WIRE -1008 112 -1008 64
WIRE -512 112 -512 96
WIRE -400 192 -400 96
WIRE -1008 208 -1008 192
WIRE -896 208 -1008 208
WIRE -512 224 -512 192
WIRE -1008 240 -1008 208
WIRE 112 256 32 256
WIRE -896 272 -896 208
WIRE -592 272 -896 272
WIRE -176 272 -176 80
WIRE -400 288 -400 256
WIRE -400 288 -544 288
WIRE -352 288 -352 32
WIRE -352 288 -400 288
WIRE -208 288 -352 288
WIRE 32 288 32 256
WIRE -848 304 -848 32
WIRE -592 304 -848 304
WIRE -16 304 -144 304
WIRE -400 320 -400 288
WIRE -272 320 -272 48
WIRE -208 320 -272 320
WIRE -1008 352 -1008 320
WIRE -176 352 -176 336
WIRE -16 384 -16 352
WIRE 32 400 32 368
WIRE 128 400 32 400
WIRE 144 400 128 400
WIRE -400 432 -400 384
WIRE -272 432 -272 320
WIRE 144 448 144 400
WIRE -832 464 -1008 464
WIRE -784 464 -784 80
WIRE -784 464 -832 464
WIRE -528 464 -784 464
WIRE -1008 480 -1008 464
WIRE -400 544 -400 512
WIRE -272 544 -272 512
WIRE -1008 592 -1008 560
WIRE -128 608 -208 608
WIRE 96 608 96 64
WIRE 96 608 -48 608
WIRE 128 608 96 608
WIRE -208 624 -208 608
WIRE -832 672 -944 672
WIRE -592 672 -832 672
WIRE -528 688 -528 464
WIRE -944 704 -944 672
WIRE -592 704 -592 672
WIRE -560 704 -592 704
WIRE -560 736 -592 736
WIRE -208 736 -208 704
WIRE -208 736 -336 736
WIRE -832 752 -944 752
WIRE -688 752 -832 752
WIRE -592 752 -592 736
WIRE -592 752 -608 752
WIRE -208 752 -208 736
WIRE -528 784 -528 752
WIRE -944 800 -944 752
WIRE -336 832 -336 736
WIRE -336 928 -336 832
FLAG -208 752 0
FLAG 128 608 VREF
IOPIN 128 608 Out
FLAG -336 832 GND
IOPIN -336 832 In
FLAG -848 304 -EA
IOPIN -848 304 In
FLAG -896 208 +EA
IOPIN -896 208 In
FLAG -400 544 0
FLAG -512 224 0
FLAG -832 464 VIN
IOPIN -832 464 In
FLAG -528 784 0
FLAG -832 672 -CS
IOPIN -832 672 In
FLAG -832 752 +CS
IOPIN -832 752 In
FLAG -272 544 0
FLAG -176 352 0
FLAG -272 48 SWO
IOPIN -272 48 Out
FLAG -16 384 0
FLAG -384 32 COMP
IOPIN -384 32 Out
FLAG 112 256 VC
IOPIN 112 256 BiDir
FLAG 128 400 OUT_A
IOPIN 128 400 BiDir
FLAG -944 704 0
FLAG -944 800 0
FLAG -336 928 0
FLAG -1008 592 0
FLAG 144 448 0
FLAG -1008 352 0
SYMBOL voltage -208 608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -512 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.5
SYMBOL voltage -400 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0.9
SYMBOL res -32 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RS
SYMATTR Value 10
SYMBOL diode -384 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode -384 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL Comparators\\LTC1441 -528 656 R0
SYMATTR InstName U1
SYMBOL voltage -704 752 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 100m
SYMBOL voltage -272 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(1 3 0 {0.99*1/f} {0.01*1/f} 0 {1/f})
SYMBOL e 32 272 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL voltage -1008 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 16
SYMBOL res -1024 96 R0
SYMATTR InstName R1
SYMATTR Value 20K
SYMBOL res -1024 224 R0
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL OTA_3526 -560 288 R0
SYMATTR SpiceLine Ri= 10e6 Ro=2e6
SYMATTR SpiceLine2 gm=1.99e-3 Fo=800
SYMATTR InstName U4
SYMBOL OpAmps\\UniversalOpAmp2 -176 304 R0
SYMATTR InstName U2
TEXT -712 656 Left 2 ;Current Sense
TEXT -736 288 Left 2 ;Error Amp
TEXT -224 480 Left 2 ;Sawtooth
TEXT -80 288 Left 2 ;PWM
TEXT -520 616 Left 2 ;this output should\ngo to pwm comparator,
TEXT -80 816 Left 2 !.param f=100k
TEXT -80 848 Left 2 !.tran 0 300u 0 0.1u uic
TEXT -160 -56 Left 2 ;Ro and fo from datasheet\ngm = Ao/Ro = 10^(xdB/20)/Ro\ngm = 1.99, Ro = 2e6, Fo = 800
TEXT -664 -56 Left 2 ;comp should go to \n(R + C)//R and ground
TEXT -1328 192 Left 2 ;one of these inputs\nshould come from feedback\nand the other fixed to\neither 5 or 16
RECTANGLE Normal 96 800 -784 80 2
